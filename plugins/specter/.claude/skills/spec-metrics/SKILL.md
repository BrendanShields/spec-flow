---
name: spec:metrics
description: Use when showing metrics, progress report, development stats, workflow tracking, velocity analysis, quality metrics, efficiency metrics requested - generates comprehensive development metrics from WORKFLOW-PROGRESS.md with visualizations and export options
allowed-tools: Read, Bash
---

# Spec Metrics

Display development metrics, progress tracking, and workflow analytics.

## What This Skill Does

- Reads WORKFLOW-PROGRESS.md for feature tracking data
- Calculates velocity metrics (features/sprint, duration, task rates)
- Shows quality metrics (test coverage, bugs, tech debt)
- Displays efficiency metrics (phase time ratios, bottlenecks)
- Generates text-based visualizations (progress bars, charts)
- Exports metrics to CSV/JSON for external analysis
- Tracks AI vs human contribution ratios

## When to Use

1. User asks "show metrics" or "progress report"
2. User requests "development stats" or "workflow metrics"
3. User wants velocity analysis or sprint planning data
4. User needs quality metrics or efficiency tracking
5. User mentions "export metrics" or "metrics dashboard"
6. User asks about feature completion rates or time tracking
7. User wants to analyze bottlenecks or optimize workflow

## Execution Flow

### Phase 1: Load Tracking Data

1. Read `.specter-memory/WORKFLOW-PROGRESS.md` using Read tool
2. Parse feature list (completed, in-progress, planned)
3. Extract metrics section (velocity, quality, efficiency)
4. Read `.specter-state/current-session.md` for active context
5. Validate data availability and completeness

**Error Handling**: If WORKFLOW-PROGRESS.md missing, inform user to run `/specter-init` first.

### Phase 2: Calculate Metrics

**Velocity Metrics**:
- Features completed per sprint
- Average feature duration (days/hours)
- Average tasks per feature
- Task completion rate (tasks/day)
- Story points velocity (if tracked)

**Quality Metrics**:
- Test coverage percentage
- Bugs found vs fixed ratio
- Bug density (bugs per feature)
- Tech debt items count
- Code review pass rate (if tracked)

**Efficiency Metrics**:
- Time per phase (spec/plan/implement percentages)
- Bottleneck identification (longest phase)
- Parallel work utilization
- Context switch frequency
- Rework percentage

**AI Impact Metrics**:
- Lines generated by AI vs human
- AI contribution percentage
- Features with AI assistance
- Time savings from AI automation

### Phase 3: Generate Visualizations

Create text-based charts:

```
Feature Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% (4/5 features)
Sprint Velocity:  ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñí‚ñí‚ñë‚ñë 2.3 features/sprint
Test Coverage:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñë‚ñë 87%
```

Display trend analysis:
- Sprint-over-sprint velocity changes
- Quality metric trends
- Efficiency improvements

### Phase 4: Format Output

**Default Format** (console-friendly):
- Summary dashboard with key metrics
- Feature breakdown by status
- Visual progress bars
- Recent trends and insights

**CSV Export** (`--export=csv`):
- Feature data with completion dates
- Metric time series
- Task-level details

**JSON Export** (`--export=json`):
- Complete structured data
- Nested metrics hierarchy
- Machine-readable format

**Verbose Mode** (`--verbose`):
- Historical trend analysis
- Detailed phase breakdowns
- Individual contributor stats
- Bottleneck analysis

### Phase 5: Provide Insights

Generate actionable recommendations:
- "Velocity decreased 15% last sprint - investigate blockers"
- "Planning phase takes 30% of time - consider templates"
- "Test coverage dropped below 85% - focus on testing"
- "Feature 003 blocked for 5 days - escalate dependency"

## Error Handling

**No WORKFLOW-PROGRESS.md**:
```
Error: Metrics not available
Solution: Run /specter-init to initialize tracking
```

**Incomplete Data**:
```
Warning: Some metrics unavailable (insufficient history)
Displaying available data with [N/A] for missing metrics
```

**Invalid Export Path**:
```
Error: Cannot write to export path
Solution: Verify directory exists and permissions
```

**No Completed Features**:
```
Info: No completed features yet
Showing: Current feature progress and planned work
```

## Output Format

### Default Console Output

```
üìä Spec Metrics Dashboard
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üéØ VELOCITY METRICS
  Features Completed: 4/10 (40%)
  Average Duration:   3.5 days per feature
  Task Velocity:      18.5 tasks/day
  Sprint Velocity:    2.3 features/sprint
  Progress:           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80%

üìà QUALITY METRICS
  Test Coverage:      87% ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñë‚ñë
  Bugs Found/Fixed:   12/10 (83% resolved)
  Bug Density:        2.4 bugs per feature
  Tech Debt Items:    5 open

‚ö° EFFICIENCY METRICS
  Spec Phase:         15% (avg 30 min)
  Plan Phase:         20% (avg 45 min)
  Implement Phase:    65% (avg 4 hours)
  Bottleneck:         Implementation (target: 60%)

ü§ñ AI IMPACT METRICS
  AI-Generated Lines: 8,247 / 12,503 (66%)
  Features w/ AI:     10/10 (100%)
  Time Saved:         ~43 hours estimated

üìä CURRENT SPRINT
  Sprint 3 Progress:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 60% (6/10 features)
  Days Remaining:     8 days
  On Track:           Yes ‚úÖ

üîç INSIGHTS
  ‚úÖ Velocity steady at 2.3 features/sprint
  ‚ö†Ô∏è  Test coverage dropped 3% - focus testing
  ‚úÖ No blocked features currently
  üí° Planning efficiency improved 12%

Last Updated: 2025-10-31 15:45:00
```

### CSV Export Format

```csv
feature_id,name,status,started,completed,duration_days,tasks_total,tasks_completed,test_coverage,bugs_found,bugs_fixed
001,User Auth,completed,2025-10-20,2025-10-25,5,23,23,92,3,3
002,Product Search,in_progress,2025-10-30,null,1,23,15,85,2,1
```

### JSON Export Format

```json
{
  "generated_at": "2025-10-31T15:45:00Z",
  "project": "My SaaS Application",
  "metrics": {
    "velocity": {
      "features_completed": 4,
      "features_total": 10,
      "completion_rate": 0.40,
      "avg_duration_days": 3.5,
      "sprint_velocity": 2.3
    },
    "quality": {
      "test_coverage": 0.87,
      "bugs_found": 12,
      "bugs_fixed": 10,
      "bug_density": 2.4
    }
  },
  "features": [...]
}
```

## Usage Examples

See `EXAMPLES.md` for concrete scenarios.

## Technical Details

See `REFERENCE.md` for metric calculation formulas and export specifications.

## Integration

**State Files Used**:
- `.specter-memory/WORKFLOW-PROGRESS.md` (primary source)
- `.specter-state/current-session.md` (current context)
- `.specter-memory/CHANGES-COMPLETED.md` (task details)

See `shared/state-management.md` for file formats.

**Related Commands**:
- `/status` - Quick progress check
- `/specter-analyze` - Deep analysis of specific feature
- `/validate` - Verify data consistency

## Notes

- Metrics calculated from actual tracking data (not estimates)
- Export formats compatible with Excel, Tableau, custom dashboards
- Historical trends require 3+ completed features minimum
- AI impact metrics track Claude Code contributions
- Updates automatically when WORKFLOW-PROGRESS.md changes
