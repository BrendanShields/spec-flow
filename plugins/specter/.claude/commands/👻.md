# Specter - Unified Hub Command

The single entry point for all Specter workflow operations. Intelligently routes to the appropriate skill based on context and arguments.

## Usage

```bash
/ğŸ‘»                           # Context-aware: shows help or continues workflow
/ğŸ‘» init                      # Initialize Specter in project
/ğŸ‘» "Feature description"     # Create specification (auto-detects free text)
/ğŸ‘» plan                      # Create technical plan
/ğŸ‘» tasks                     # Break down into tasks
/ğŸ‘» implement                 # Execute implementation
/ğŸ‘» --help                    # Show this help
/ğŸ‘» --interactive             # Interactive menu mode
```

## Smart Routing

The `/ğŸ‘»` command intelligently routes based on:
1. **Explicit subcommands** - Direct routing (e.g., `/ğŸ‘» init`)
2. **Free text** - Auto-detects specification text
3. **Current context** - Continues workflow from current phase
4. **No arguments** - Shows context-aware help

## Quick Examples

```bash
# Initialize new project
/ğŸ‘» init

# Create specification (both work the same)
/ğŸ‘» "Add user authentication with OAuth2"
/ğŸ‘» specify "Add user authentication with OAuth2"

# Continue workflow (context-aware)
/ğŸ‘»          # In spec phase â†’ creates plan
/ğŸ‘»          # In plan phase â†’ creates tasks
/ğŸ‘»          # In tasks phase â†’ begins implementation

# Explicit workflow control
/ğŸ‘» plan
/ğŸ‘» tasks
/ğŸ‘» implement

# Team collaboration
/ğŸ‘» team                      # Show team status
/ğŸ‘» assign @alice T001        # Assign task
/ğŸ‘» master-spec               # Generate master specification

# Utilities
/ğŸ‘» status
/ğŸ‘» validate
/ğŸ‘» help
```

## Command Router

When you invoke `/ğŸ‘»`, it:

1. **Loads minimal context** (only ~500 tokens)
2. **Detects your intent** from arguments and current phase
3. **Routes to appropriate skill** with lazy loading
4. **Executes efficiently** with progressive disclosure

## Interactive Mode

For users unfamiliar with commands:

```bash
/ğŸ‘» --interactive
```

Shows a menu based on your current phase:
```
ğŸ“Š Specter Workflow - Current Phase: Specification
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

What would you like to do?

1. Continue to planning phase
2. Update specification
3. Clarify requirements
4. Check status
5. View team dashboard
6. Exit

Choose an option (1-6):
```

## Progressive Help

Get help tailored to your current phase:

```bash
/ğŸ‘» --help
```

**In specification phase:**
```
You're in the SPECIFICATION phase.

Next steps:
1. /ğŸ‘» plan - Create technical plan
2. /ğŸ‘» clarify - Resolve ambiguities
3. /ğŸ‘» update "changes" - Modify spec

Current feature: 002-specter-consolidation-v3
Progress: 50% (spec, plan, tasks complete)
```

**In implementation phase:**
```
You're in the IMPLEMENTATION phase.

Next steps:
1. /ğŸ‘» implement - Continue implementation
2. /ğŸ‘» status - Check task progress
3. /ğŸ‘» team - View team assignments

Current feature: 002-specter-consolidation-v3
Tasks: 15/53 complete (28%)
```

## Backward Compatibility

All old commands still work (with deprecation warnings):

```bash
/ğŸ‘» init        # New way
/specter-init   # Old way (shows deprecation warning)
```

Old commands are wrappers that call `/ğŸ‘»` internally. They will be removed in v4.0 (Jan 2026).

## Token Efficiency

The hub command uses **lazy loading** to minimize token usage:

- **Always loaded**: Router + context detection (~500 tokens)
- **On demand**: Skill core when invoked (~1,750 tokens)
- **Progressive**: Examples/reference only with flags (~15,000 tokens)

**Total**: ~2,250 tokens per invocation (84% reduction vs v2.1)

## Examples by Use Case

### Starting Fresh
```bash
cd my-project
/ğŸ‘» init
/ğŸ‘» "Add user authentication system"
/ğŸ‘» plan
/ğŸ‘» tasks
/ğŸ‘» implement
```

### Team Collaboration
```bash
# Alice locks feature
/ğŸ‘» "Add payment integration"

# Bob tries to work on it
/ğŸ‘» "Add payment integration"
# âŒ Feature locked by @alice

# Alice assigns tasks
/ğŸ‘» assign @bob T001 T002

# Bob checks assignments
/ğŸ‘» team
```

### Continuing Work
```bash
# Check where you left off
/ğŸ‘» status

# Continue from current phase
/ğŸ‘»

# Or jump to specific phase
/ğŸ‘» implement --continue
```

## Advanced Features

### Task Assignment
```bash
/ğŸ‘» assign @username T001           # Assign single task
/ğŸ‘» assign @username T001-T005      # Assign range
/ğŸ‘» unassign T001                   # Unassign task
```

### Feature Locking
```bash
/ğŸ‘» lock 002                        # Lock feature for yourself
/ğŸ‘» unlock 002                      # Release lock
/ğŸ‘» force-unlock 002                # Admin override
```

### Master Spec
```bash
/ğŸ‘» master-spec                     # Generate consolidated documentation
/ğŸ‘» master-spec --html              # Generate HTML version
```

### Metrics
```bash
/ğŸ‘» metrics                         # Show development metrics
/ğŸ‘» metrics --export=csv            # Export to CSV
```

## Skill Mapping

| Subcommand | Skill | Description |
|------------|-------|-------------|
| init | specter-init | Initialize Specter |
| (free text) | specter-specify | Create specification |
| clarify | specter-specify | Resolve ambiguities |
| plan | specter-plan | Technical design |
| tasks | specter-tasks | Task breakdown |
| implement | specter-implement | Execute tasks |
| update | specter-specify | Update specification |
| analyze | specter-analyze | Validate consistency |
| blueprint | specter-init | Define architecture |
| metrics | specter-metrics | Show metrics |
| team | (hub built-in) | Team dashboard |
| assign | (hub built-in) | Task assignment |
| lock/unlock | (hub built-in) | Feature locking |
| master-spec | (hub built-in) | Master spec generation |

## Shell Completion

Enable tab completion:

### Bash
```bash
source ~/.claude/completion/specter.bash
```

### Zsh
```bash
# Add to ~/.zshrc
fpath=(~/.claude/completion $fpath)
autoload -Uz compinit && compinit
```

Now you can use:
```bash
/ğŸ‘» <TAB>           # Lists all subcommands
/ğŸ‘» assign @<TAB>   # Lists team members
```

## Troubleshooting

**Command not found?**
```
Error: /ğŸ‘» command not found

Solution: The plugin may not be installed correctly.
Run: /plugin install specter@specter-marketplace
```

**Context detection failed?**
```
Error: Cannot determine current phase

Solution: Initialize Specter first:
/ğŸ‘» init
```

**Feature locked by someone else?**
```
Error: Feature 002 is locked by @alice

Solution: Wait for @alice to finish, or contact them to unlock.
Admin: Use /ğŸ‘» force-unlock 002
```

## Migration from v2.1

If you're used to the old commands:

| Old Command | New Command |
|-------------|-------------|
| /specter-init | /ğŸ‘» init |
| /specter-specify "X" | /ğŸ‘» "X" |
| /specter-plan | /ğŸ‘» plan |
| /specter-tasks | /ğŸ‘» tasks |
| /specter-implement | /ğŸ‘» implement |
| /specter-clarify | /ğŸ‘» clarify |
| /specter-update "X" | /ğŸ‘» update "X" |

Old commands still work until v4.0 (Jan 2026).

## Related Commands

- `/status` - Check workflow state
- `/help` - Context-aware help
- `/validate` - Validate consistency

---

**Specter v3.0** - Unified workflow command with intelligent routing and team collaboration.

**Quick start**: `/ğŸ‘» init` â†’ `/ğŸ‘» "Your feature"` â†’ `/ğŸ‘»` â†’ `/ğŸ‘»` â†’ Done! ğŸ‰

---

## IMPORTANT: Command Behavior

When this command is executed:

1. **First**, check the current context by reading `.specter-state/current-session.md` and `.specter-memory/WORKFLOW-PROGRESS.md`

2. **Then**, output the current status:
   - Current feature and phase
   - Progress percentage
   - Recent completed tasks
   - Next recommended action

3. **Finally**, use the `AskUserQuestion` tool to ask what they'd like to do next with these options:

   - **If in specification phase completed**: Offer "Create technical plan", "Clarify requirements", "Update specification", "Check detailed status"

   - **If in planning phase completed**: Offer "Break down into tasks", "Update plan", "Check detailed status", "Start different feature"

   - **If in tasks phase completed**: Offer "Begin implementation", "Review tasks", "Update tasks", "Check detailed status"

   - **If in implementation phase**: Offer "Continue implementing", "Check progress", "Switch to different task", "Commit current work"

   - **If uninitialized**: Offer "Initialize Specter", "Learn more about Specter", "See examples"

The AskUserQuestion should have:
- **header**: "Next Action"
- **question**: "What would you like to do next?"
- **multiSelect**: false
- **options**: 3-4 options based on current phase with clear labels and helpful descriptions

After the user answers, execute the chosen action immediately without asking for confirmation again.

<!-- ROUTER EXECUTION -->
```bash
source "$(dirname "${BASH_SOURCE[0]}")/router.sh"
main "$@"
```
