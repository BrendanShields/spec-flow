# Technical Plan: Integrate Suggesting-Tooling into Orbit Workflow

## Architecture

Integration at two strategic points in the workflow:

1. **Project Initialization** (analyzing-codebase agent)
   - After PRD/TDD generation, invoke suggesting-tooling
   - Add "Recommended Tooling" section to architecture docs
   - User approves/skips before proceeding

2. **Feature Archive** (orbit-workflow skill)
   - Analyze completed feature for repeatable patterns
   - Only suggest if pattern appears 2+ times
   - Quick check, not deep analysis

## Components

| Component | Change | Purpose |
|-----------|--------|---------|
| analyzing-codebase.md | Add tooling step | Suggest after PRD/TDD |
| orbit-workflow SKILL.md | Add archive hook | Check patterns on complete |
| PRD template | Add section | Document recommended tooling |
| TDD template | Add section | Document automation opportunities |

## Integration Points

### Point 1: analyzing-codebase Agent

Add new workflow step after `generate-documentation`:

```xml
<step name="suggest-tooling">
After PRD/TDD generation:
1. Invoke suggesting-tooling skill
2. Present suggestions to user
3. If approved, generate tooling
4. Add "Recommended Tooling" section to PRD
5. Add "Automation" section to TDD
</step>
```

### Point 2: orbit-workflow Archive

Add to Archive Feature section:

```markdown
### Archive Feature (with Tooling Check)

When feature is complete:

1. Ask user: "Archive this feature?"
2. If yes, check for repeatable patterns:
   - Count similar file types created
   - Detect workflow patterns (e.g., created test + impl pairs)
   - If pattern appears 2+ times, suggest tooling
3. Run archive_feature
4. Suggest next action
```

## Repeatable Pattern Detection

Only suggest tooling for patterns that will recur:

| Pattern | Detection | Suggestion Threshold |
|---------|-----------|---------------------|
| Component creation | 3+ similar components | building-components skill |
| Test writing | 5+ test files | testing-code skill |
| API endpoints | 3+ routes | api-testing agent |
| Config files | 3+ similar configs | config-generator skill |

**NOT repeatable** (skip):
- One-off migrations
- Unique integrations
- Single file changes

## Template Updates

### PRD Addition

```markdown
## Recommended Tooling

| Type | Name | Purpose | Status |
|------|------|---------|--------|
| Skill | {name} | {purpose} | Suggested/Created |
| Agent | {name} | {purpose} | Suggested/Created |

*Generated by suggesting-tooling skill*
```

### TDD Addition

```markdown
## Automation Opportunities

### Available Skills
| Skill | Purpose | Trigger |
|-------|---------|---------|
| {name} | {purpose} | {when to use} |

### Available Agents
| Agent | Purpose | Invocation |
|-------|---------|------------|
| {name} | {purpose} | {how to invoke} |

*Update when new tooling is created*
```

## Implementation Phases

1. **Phase 1**: Update analyzing-codebase agent
2. **Phase 2**: Update orbit-workflow skill
3. **Phase 3**: Update PRD/TDD templates in agent

## Risks

| Risk | Impact | Mitigation |
|------|--------|------------|
| Too many prompts | User fatigue | Only prompt if high-value suggestions |
| Slow analysis | Workflow delay | Keep pattern check lightweight |
| Over-suggesting | Tooling bloat | Require 2+ pattern occurrences |
